---
title: Ansys concrete aggregates generation
date: 2015-11-08 20:52:21
categories:
- Explorations
tags:
- Ansys
---

I have worked on several concrete analysis cases and I found that it is possible to establish a refined model of concrete, including models for concrete aggregates and mortar. This is quite interesting. So, I searched online and discovered many papers and studies on this topic. I also realized that the random generation of concrete aggregates indeed involves certain techniques. After reviewing some papers, I found that the random generation of aggregates mainly relies on coding skills. To achieve the required aggregate gradation, various "advanced methods" can be added to the generation algorithm, such as using the Monte Carlo method to generate graded concrete aggregate models, as well as generating irregular aggregates.

<!-- more -->

In Ansys, simple loops can be used to generate circular or square aggregates. This mainly relies on Ansys's RAND function. Calling RAND(MIN,MAX) in APDL can generate a random number in this range. Therefore, with this function, the generation of aggregates is based on the basic design algorithm. The generation of aggregates needs to meet the following conditions:

* Boundary control of aggregates
* Aggregates should not overlap
* Size can be random
* Preferably, graded aggregates should be generated

For the 4th point above, it's necessary to set the random distribution rules of aggregate model sizes, which is relatively complex. However, for the first three points, it is relatively simple. After careful analysis, the following process can be used to generate the code,

![Flowchart](/uploads/images/2015/AnsysConcreteAggregate0.svg)

The drawio file for this flowchart can be downloaded here ([DOWNLOAD](/uploads/files/2015/AnsysConcreteAggregrate.drawio)). Based on the steps mentioned above, we can write the corresponding APDL code. It is important to avoid using infinite loops when determining whether the current number of generated aggregates exceeds the required number. Instead, we can loop through a large number to prevent the computer from not responding for a long time and being mistakenly considered as crashed.

Running the APDL code can generate the results of the aggregates,

![Aggregates](/uploads/images/2015/AnsysConcreteAggregate2.png)

If more complex techniques are used in the algorithm, the desired aggregates gradation can be achieved. Obviously, the aggregates generated by Ansys are still limited to spherical shapes. To generate arbitrary polyhedra, we can start with two-dimensional generation due to the lower computational cost and the ability to obtain more accurate results.

With the results obtained, it's possible to generate the external cubic mortar part and also set surface effect elements on the aggregate surface to simulate slip and force on the aggregates. Here are some meshed aggregrates,

![Aggregates](/uploads/images/2015/AnsysConcreteAggregate3.png)

![Aggregates](/uploads/images/2015/AnsysConcreteAggregate4.png)

> The model is a test model, and the APDL code is available upon request.
